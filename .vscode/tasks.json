{
    "version": "2.0.0",
    "tasks": [
        // =========== Conan 依赖安装任务 ===========
        {
            "label": "Conan Install (Linux Debug)",
            "type": "shell",
            "command": "conan",
            "args": [
                "install",
                ".",
                "--output-folder=build/linux-debug",
                "--build=missing",
                "-s", "build_type=Debug"
            ],
            "problemMatcher": [],
            "detail": "为 Linux Debug 配置安装 Conan 依赖"
        },
        {
            "label": "Conan Install (Linux Release)",
            "type": "shell",
            "command": "conan",
            "args": [
                "install",
                ".",
                "--output-folder=build/linux-release",
                "--build=missing",
                "-s", "build_type=Release"
            ],
            "problemMatcher": [],
            "detail": "为 Linux Release 配置安装 Conan 依赖"
        },
        {
            "label": "Conan Install (AArch64 Debug)",
            "type": "shell",
            "command": "conan",
            "args": [
                "install",
                ".",
                "--output-folder=build/aarch64-linux-gnu-debug",
                "--build=missing",
                "--profile:host=./aarch64-linux-gnu", // 确保 aarch64-linux-gnu 文件在根目录
                "--profile:build=default",
                "-s", "build_type=Debug"
            ],
            "problemMatcher": [],
            "detail": "为 AArch64 Debug 交叉编译安装 Conan 依赖"
        },
        // =========== 构建任务 ===========
        {
            "label": "Build (Debug)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "linux-debug"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": ["$gcc"],
            "detail": "构建 Debug 版本",
            "dependsOn": [
                "Conan Install (Linux Debug)"
            ]
        },
        {
            "label": "Build (Release)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "linux-release"
            ],
            "group": "build",
            "problemMatcher": ["$gcc"],
            "detail": "构建 Release 版本",
            "dependsOn": [
                "Conan Install (Linux Release)"
            ]
        },
        {
            "label": "Build (AArch64 Debug)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "aarch64-linux-gnu-debug"
            ],
            "group": "build",
            "problemMatcher": ["$gcc"],
            "detail": "交叉编译构建 AArch64 Debug 版本",
            "dependsOn": [
                "Conan Install (AArch64 Debug)"
            ]
        },
        // =========== 清理任务 ===========
        {
            "label": "Clean",
            "type": "shell",
            "command": "rm",
            "args": [
                "-rf",
                "build"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "清理构建目录"
        }
    ]
}